<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CHEMIDREAM TERMINAL</title>

<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  background: black;
  font-family: monospace;
  overflow: hidden;
}

/* ===== BOOT SCREEN ===== */
#boot {
  position: fixed;
  inset: 0;
  background: black;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9cff9c;
  font-size: 56px;
  letter-spacing: 6px;
  text-shadow: 0 0 18px #00ff66;
  animation: bootGlitch 1.2s infinite;
  z-index: 10;
}

@keyframes bootGlitch {
  0% { transform: translate(0,0); opacity: 1; }
  25% { transform: translate(-2px,1px); opacity: .7; }
  50% { transform: translate(2px,-1px); }
  75% { transform: translate(-1px,2px); opacity: .85; }
  100% { transform: translate(0,0); opacity: 1; }
}

/* ===== MONITOR WRAPPER ===== */
#monitor-wrapper {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
}

/* ===== MONITOR IMAGE ===== */
#monitor {
  position: relative;
  width: 96vw;
  height: 96vh;
  background: url("assets/monitor.png") center center / contain no-repeat;
}

/* ===== SCREEN (MATCHES MONITOR GLASS) ===== */
#screen {
  position: absolute;
  top: 13%;
  left: 33%;
  width: 35%;
  height: 54%;

  overflow: hidden;
  border-radius: 22px;

  /* имитация стекла */
  box-shadow:
    inset 0 0 45px rgba(0,255,120,0.18),
    inset 0 0 120px rgba(0,0,0,0.6);
}

/* ===== TERMINAL ===== */
#terminal {
  width: 100%;
  height: 100%;
  padding: 10px;
  color: #9cff9c;
  font-size: 16px;
  white-space: pre-wrap;
  overflow-y: auto;
  text-shadow: 0 0 6px #00ff66;
}

/* ===== INPUT ===== */
#input-line {
  display: flex;
}

#prompt {
  margin-right: 6px;
}

#input {
  white-space: pre;
}

.cursor {
  width: 10px;
  background: #9cff9c;
  animation: blink 1s steps(1) infinite;
}

@keyframes blink {
  50% { opacity: 0; }
}

/* ===== CRT NOISE ===== */
#noise {
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    rgba(255,255,255,0.015),
    rgba(255,255,255,0.015) 1px,
    transparent 2px,
    transparent 4px
  );
  pointer-events: none;
  animation: flicker 0.25s infinite;
  display: none;
}

@keyframes flicker {
  0% { opacity: .12; }
  50% { opacity: .22; }
  100% { opacity: .12; }
}
</style>
</head>

<body>

<div id="boot">PRESS ANY KEY</div>

<div id="monitor-wrapper">
  <div id="monitor">
    <div id="screen">
      <div id="terminal">
        <div id="history"></div>
        <div id="input-line">
          <span id="prompt">&gt;</span>
          <span id="input"></span><span class="cursor"></span>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="noise"></div>
<audio id="hum" src="assets/hum.mp3" loop></audio>

<script>
const boot = document.getElementById("boot");
const monitorWrapper = document.getElementById("monitor-wrapper");
const terminal = document.getElementById("terminal");
const history = document.getElementById("history");
const input = document.getElementById("input");
const hum = document.getElementById("hum");
const noise = document.getElementById("noise");

let active = false;
let typing = false;
let lastInput = Date.now();

/* ===== TYPEWRITER ===== */
function typeLine(text, speed = 26) {
  typing = true;
  let i = 0;
  const line = document.createElement("div");
  history.appendChild(line);

  const interval = setInterval(() => {
    if (i < text.length) {
      line.textContent += text[i++];
      terminal.scrollTop = terminal.scrollHeight;
    } else {
      clearInterval(interval);
      typing = false;
    }
  }, speed);
}

/* ===== START SYSTEM ===== */
function startSystem() {
  if (active) return;
  active = true;

  boot.style.display = "none";
  monitorWrapper.style.display = "flex";
  noise.style.display = "block";

  hum.volume = 0.35;
  hum.play().catch(()=>{});

  const bootLines = [
    "CHEMIDREAM INTERNAL INTERFACE",
    "ACCESS NODE: UNKNOWN",
    "",
    "intrusion detected",
    "initializing consciousness core...",
    "ERROR // unauthorized observer",
    "",
    "SYSTEM ONLINE",
    ""
  ];

  let delay = 0;
  bootLines.forEach(line => {
    setTimeout(() => typeLine(line), delay);
    delay += line.length * 30 + 250;
  });
}

/* ===== INPUT ===== */
document.addEventListener("keydown", e => {
  if (typing) return;

  lastInput = Date.now();

  if (!active) {
    startSystem();
    return;
  }

  if (e.key === "Backspace") {
    input.textContent = input.textContent.slice(0, -1);
    e.preventDefault();
  } else if (e.key === "Enter") {
    const cmd = input.textContent.trim();
    typeLine("> " + cmd);
    handleCommand(cmd.toLowerCase());
    input.textContent = "";
  } else if (e.key.length === 1) {
    input.textContent += e.key;
  }
});

/* ===== COMMANDS ===== */
function handleCommand(cmd) {
  switch(cmd) {
    case "help":
      typeLine("AVAILABLE COMMANDS:");
      typeLine("help");
      typeLine("status");
      typeLine("whoami");
      break;

    case "status":
      typeLine("SUBJECT: VENIAMIN");
      typeLine("BODY: NOT PRESENT");
      typeLine("STATE: AWARE");
      break;

    case "whoami":
      typeLine("YOU ARE NOT LISTED IN THIS SYSTEM");
      break;

    default:
      typeLine("UNKNOWN COMMAND");
  }
}

/* ===== VENIAMIN MESSAGES ===== */
const veniaminLines = [
  "I still feel my hands",
  "this screen is not a body",
  "they said I would be saved",
  "I remember the wind",
  "pain never initializes",
  "this is not life",
  "they closed the door",
  "I am awake inside",
  "this system breathes for me",
  "I am still here"
];

function randomVeniamin() {
  if (!active || typing) return;
  const msg = veniaminLines[Math.floor(Math.random() * veniaminLines.length)];
  typeLine(msg, 35);
}

/* РЕДКО, НЕСПЕША */
setInterval(() => {
  if (Date.now() - lastInput > 30000) {
    randomVeniamin();
    lastInput = Date.now();
  }
}, 15000);
</script>

</body>
</html>
