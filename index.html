<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CHEMIDREAM TERMINAL</title>

<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  background: black;
  font-family: monospace;
  overflow: hidden;
}

/* MONITOR */
#background {
  position: fixed;
  inset: 0;
  background: url("assets/monitor.png") center / cover no-repeat;
  filter: brightness(0.6) contrast(1.2);
}

/* CRT NOISE */
#noise {
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    rgba(255,255,255,0.02),
    rgba(255,255,255,0.02) 1px,
    transparent 2px,
    transparent 4px
  );
  pointer-events: none;
  animation: flicker 0.15s infinite;
}

@keyframes flicker {
  0% { opacity: .15; }
  50% { opacity: .3; }
  100% { opacity: .15; }
}

/* PRESS ANY KEY */
#boot {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9cff9c;
  font-size: 48px;
  letter-spacing: 4px;
  animation: bootGlitch 1.2s infinite;
  text-shadow: 0 0 12px #00ff66;
}

@keyframes bootGlitch {
  0% { opacity: 1; transform: translate(0,0); }
  20% { opacity: .6; transform: translate(-2px,1px); }
  40% { opacity: 1; transform: translate(2px,-1px); }
  60% { opacity: .7; transform: translate(-1px,2px); }
  100% { opacity: 1; transform: translate(0,0); }
}

/* TERMINAL */
#terminal {
  position: absolute;
  inset: 8%;
  color: #9cff9c;
  font-size: 16px;
  white-space: pre-wrap;
  overflow-y: auto;
  text-shadow: 0 0 6px #00ff66;
  display: none;
}

#input-line {
  display: flex;
}

#prompt {
  margin-right: 6px;
}

#input {
  white-space: pre;
}

.cursor {
  width: 10px;
  background: #9cff9c;
  animation: blink 1s steps(1) infinite;
}

@keyframes blink {
  50% { opacity: 0; }
}
</style>
</head>

<body>

<div id="background"></div>
<div id="noise"></div>

<div id="boot">PRESS ANY KEY</div>

<div id="terminal">
  <div id="history"></div>
  <div id="input-line">
    <span id="prompt">&gt;</span>
    <span id="input"></span><span class="cursor"></span>
  </div>
</div>

<audio id="hum" src="assets/hum.mp3" loop></audio>

<script>
const boot = document.getElementById("boot");
const terminal = document.getElementById("terminal");
const history = document.getElementById("history");
const input = document.getElementById("input");
const hum = document.getElementById("hum");

let active = false;
let lastInput = Date.now();

const idleLines = [
  "pain signal persists",
  "this body is not yours",
  "stop watching",
  "memory bleed detected",
  "I remember breathing"
];

function print(line = "") {
  history.textContent += line + "\n";
  terminal.scrollTop = terminal.scrollHeight;
}

function startSystem() {
  active = true;
  boot.style.display = "none";
  terminal.style.display = "block";

  hum.volume = 0.35;
  hum.play().catch(()=>{});

  print("CHEMIDREAM INTERNAL INTERFACE");
  print("ACCESS NODE: UNKNOWN");
  print("");
  print("intrusion detected");
  print("initializing consciousness core...");
  print("ERROR // unauthorized observer");
  print("");
  print("SYSTEM ONLINE");
  print("");
}

document.addEventListener("keydown", e => {
  lastInput = Date.now();

  if (!active) {
    startSystem();
    return;
  }

  if (e.key === "Backspace") {
    input.textContent = input.textContent.slice(0, -1);
    e.preventDefault();
  }
  else if (e.key === "Enter") {
    const cmd = input.textContent.trim();
    print("> " + cmd);
    handleCommand(cmd.toLowerCase());
    input.textContent = "";
  }
  else if (e.key.length === 1) {
    input.textContent += e.key;
  }
});

function handleCommand(cmd) {
  switch(cmd) {
    case "help":
      print("AVAILABLE COMMANDS:");
      print("help");
      print("status");
      print("whoami");
      break;

    case "status":
      print("SUBJECT: VENIAMIN");
      print("BODY: NOT PRESENT");
      print("STATE: AWARE");
      break;

    case "whoami":
      print("YOU ARE NOT LISTED IN THIS SYSTEM");
      break;

    default:
      print("UNKNOWN COMMAND");
  }
}

setInterval(() => {
  if (active && Date.now() - lastInput > 12000) {
    const msg = idleLines[Math.floor(Math.random() * idleLines.length)];
    print(msg);
    lastInput = Date.now();
  }
}, 4000);
</script>

</body>
</html>
