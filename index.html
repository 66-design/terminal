<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CHEMIDREAM TERMINAL</title>

<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  background: black;
  font-family: monospace;
  overflow: hidden;
}

/* ===== BOOT SCREEN ===== */
#boot {
  position: fixed;
  inset: 0;
  background: black;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9cff9c;
  font-size: 56px;
  letter-spacing: 6px;
  text-shadow: 0 0 16px #00ff66;
  animation: bootGlitch 1.1s infinite;
  z-index: 10;
}

@keyframes bootGlitch {
  0% { transform: translate(0,0); opacity: 1; }
  20% { transform: translate(-2px,1px); opacity: .7; }
  40% { transform: translate(2px,-1px); }
  60% { transform: translate(-1px,2px); opacity: .85; }
  100% { transform: translate(0,0); opacity: 1; }
}

/* ===== MONITOR WRAPPER ===== */
#monitor-wrapper {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
}

/* ===== MONITOR IMAGE ===== */
#monitor {
  position: relative;
  width: 96vw;
  height: 96vh;
  background: url("assets/monitor.png") center center / contain no-repeat;
}

/* ===== SCREEN AREA (TEXT INSIDE MONITOR) ===== */
#screen {
  position: absolute;
  top: 13%;
  left: 18%;
  width: 50%;
  height: 40%;
  overflow: hidden;

  box-shadow: inset 0 0 45px rgba(0,255,120,0.18);
}

/* ===== TERMINAL ===== */
#terminal {
  width: 100%;
  height: 100%;
  color: #9cff9c;
  font-size: 16px;
  white-space: pre-wrap;
  overflow-y: auto;
  text-shadow: 0 0 6px #00ff66;
}

/* ===== INPUT ===== */
#input-line {
  display: flex;
}

#prompt {
  margin-right: 6px;
}

#input {
  white-space: pre;
}

.cursor {
  width: 10px;
  background: #9cff9c;
  animation: blink 1s steps(1) infinite;
}

@keyframes blink {
  50% { opacity: 0; }
}

/* ===== CRT NOISE ===== */
#noise {
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    rgba(255,255,255,0.015),
    rgba(255,255,255,0.015) 1px,
    transparent 2px,
    transparent 4px
  );
  pointer-events: none;
  animation: flicker 0.2s infinite;
  display: none;
}

@keyframes flicker {
  0% { opacity: .12; }
  50% { opacity: .2; }
  100% { opacity: .12; }
}
</style>
</head>

<body>

<!-- BOOT -->
<div id="boot">PRESS ANY KEY</div>

<!-- MONITOR -->
<div id="monitor-wrapper">
  <div id="monitor">
    <div id="screen">
      <div id="terminal">
        <div id="history"></div>
        <div id="input-line">
          <span id="prompt">&gt;</span>
          <span id="input"></span><span class="cursor"></span>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="noise"></div>

<audio id="hum" src="assets/hum.mp3" loop></audio>

<script>
const boot = document.getElementById("boot");
const monitorWrapper = document.getElementById("monitor-wrapper");
const terminal = document.getElementById("terminal");
const history = document.getElementById("history");
const input = document.getElementById("input");
const hum = document.getElementById("hum");
const noise = document.getElementById("noise");

let active = false;
let lastInput = Date.now();

const idleLines = [
  "pain signal persists",
  "this body is not yours",
  "stop watching",
  "memory bleed detected",
  "I remember breathing",
  "hands should be here",
  "this is a prison",
  "you are still inside"
];

function print(line = "") {
  history.textContent += line + "\n";
  terminal.scrollTop = terminal.scrollHeight;
}

function startSystem() {
  if (active) return;
  active = true;

  boot.style.display = "none";
  monitorWrapper.style.display = "flex";
  noise.style.display = "block";

  hum.volume = 0.35;
  hum.play().catch(()=>{});

  print("CHEMIDREAM INTERNAL INTERFACE");
  print("ACCESS NODE: UNKNOWN");
  print("");
  print("intrusion detected");
  print("initializing consciousness core...");
  print("ERROR // unauthorized observer");
  print("");
  print("SYSTEM ONLINE");
  print("");
}

document.addEventListener("keydown", e => {
  lastInput = Date.now();

  if (!active) {
    startSystem();
    return;
  }

  if (e.key === "Backspace") {
    input.textContent = input.textContent.slice(0, -1);
    e.preventDefault();
  } 
  else if (e.key === "Enter") {
    const cmd = input.textContent.trim();
    print("> " + cmd);
    handleCommand(cmd.toLowerCase());
    input.textContent = "";
  } 
  else if (e.key.length === 1) {
    input.textContent += e.key;
  }
});

function handleCommand(cmd) {
  switch(cmd) {
    case "help":
      print("AVAILABLE COMMANDS:");
      print("help");
      print("status");
      print("whoami");
      break;

    case "status":
      print("SUBJECT: VENIAMIN");
      print("BODY: NOT PRESENT");
      print("STATE: AWARE");
      break;

    case "whoami":
      print("YOU ARE NOT LISTED IN THIS SYSTEM");
      break;

    default:
      print("UNKNOWN COMMAND");
  }
}

setInterval(() => {
  if (active && Date.now() - lastInput > 14000) {
    const msg = idleLines[Math.floor(Math.random() * idleLines.length)];
    print(msg);
    lastInput = Date.now();
  }
}, 5000);
</script>

</body>
</html>
